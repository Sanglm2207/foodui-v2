{"ast":null,"code":"var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _labelHelper = require(\"./helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\nvar createListFromArray = require(\"./helper/createListFromArray\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar getLayoutOnAxis = _barGrid.getLayoutOnAxis;\n\nvar DataDiffer = require(\"../data/DataDiffer\");\n\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\n\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\n\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\n\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\n\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['emphasis', 'itemStyle'];\nvar LABEL_NORMAL = ['label'];\nvar LABEL_EMPHASIS = ['emphasis', 'label']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\necharts.extendSeriesModel({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n\n  },\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  }\n}); // -----\n// View\n// -----\n\necharts.extendChartView({\n  type: 'custom',\n\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    this.group.removeAll();\n    data.diff(oldData).add(function (newIdx) {\n      data.hasValue(newIdx) && createOrUpdate(null, newIdx, renderItem(newIdx), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      data.hasValue(newIdx) ? createOrUpdate(el, newIdx, renderItem(newIdx), customSeries, group, data) : el && group.remove(el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  },\n  incrementalPrepareRender: function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  },\n  incrementalRender: function (params, customSeries, ecModel, api) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.useHoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdate(null, idx, renderItem(idx), customSeries, this.group, data);\n      el.traverse(setIncrementalAndHoverLayer);\n    }\n  },\n\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop\n});\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    el = graphicUtil.makePath(shape.pathData, null, {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width || 0,\n      height: shape.height || 0\n    }, 'center');\n    el.__customPathData = elOption.pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else {\n    var Clz = graphicUtil[graphicType.charAt(0).toUpperCase() + graphicType.slice(1)];\n    el = new Clz();\n  }\n\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\n\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit) {\n  var targetProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (targetProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (targetProps.position = elOption.position.slice());\n  elOption.scale && (targetProps.scale = elOption.scale.slice());\n  elOption.origin && (targetProps.origin = elOption.origin.slice());\n  elOption.rotation && (targetProps.rotation = elOption.rotation);\n\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n\n  if (isInit) {\n    el.attr(targetProps);\n  } else {\n    graphicUtil.updateProps(el, targetProps, animatableModel, dataIndex);\n  } // z2 must not be null/undefined, otherwise sort error may occur.\n\n\n  el.attr({\n    z2: elOption.z2 || 0,\n    silent: elOption.silent\n  });\n  elOption.styleEmphasis !== false && graphicUtil.setHoverStyle(el, elOption.styleEmphasis);\n}\n\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currVisualColor;\n  return function (dataIndexInside) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside)\n    }, userParams), userAPI) || {};\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n    graphicUtil.setTextStyle(itemStyle, currLabelNormalModel, null, {\n      autoColor: currVisualColor,\n      isRectText: true\n    });\n    itemStyle.text = currLabelNormalModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n    graphicUtil.setTextStyle(itemStyle, currLabelEmphasisModel, null, {\n      isRectText: true\n    }, true);\n    itemStyle.text = currLabelEmphasisModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data);\n  el && data.setItemGraphicEl(dataIndex, el);\n  return el;\n}\n\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  var elOptionType = elOption.type;\n\n  if (el && elOptionType !== el.__customGraphicType && (elOptionType !== 'path' || elOption.pathData !== el.__customPathData) && (elOptionType !== 'image' || elOption.style.image !== el.__customImagePath) && (elOptionType !== 'text' || elOption.style.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n\n  if (elOptionType == null) {\n    return;\n  }\n\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit);\n\n  if (elOptionType === 'group') {\n    var oldChildren = el.children() || [];\n    var newChildren = elOption.children || [];\n\n    if (elOption.diffChildrenByName) {\n      // lower performance.\n      diffGroupChildren({\n        oldChildren: oldChildren,\n        newChildren: newChildren,\n        dataIndex: dataIndex,\n        animatableModel: animatableModel,\n        group: el,\n        data: data\n      });\n    } else {\n      // better performance.\n      var index = 0;\n\n      for (; index < newChildren.length; index++) {\n        doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n      }\n\n      for (; index < oldChildren.length; index++) {\n        oldChildren[index] && el.remove(oldChildren[index]);\n      }\n    }\n  }\n\n  group.add(el);\n  return el;\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}","map":{"version":3,"sources":["D:/Freelancer/foodui-v2/node_modules/echarts/lib/chart/custom.js"],"names":["_config","require","__DEV__","echarts","zrUtil","graphicUtil","_labelHelper","getDefaultLabel","createListFromArray","_barGrid","getLayoutOnAxis","DataDiffer","prepareCartesian2d","prepareGeo","prepareSingleAxis","preparePolar","prepareCalendar","ITEM_STYLE_NORMAL_PATH","ITEM_STYLE_EMPHASIS_PATH","LABEL_NORMAL","LABEL_EMPHASIS","GROUP_DIFF_PREFIX","prepareCustoms","cartesian2d","geo","singleAxis","polar","calendar","extendSeriesModel","type","dependencies","defaultOption","coordinateSystem","zlevel","z","legendHoverLink","getInitialData","option","ecModel","getSource","extendChartView","_data","render","customSeries","api","oldData","data","getData","group","renderItem","makeRenderItem","removeAll","diff","add","newIdx","hasValue","createOrUpdate","update","oldIdx","el","getItemGraphicEl","remove","execute","incrementalPrepareRender","incrementalRender","params","setIncrementalAndHoverLayer","isGroup","incremental","useHoverLayer","idx","start","end","traverse","dispose","noop","createEl","elOption","graphicType","shape","makePath","pathData","x","y","width","height","__customPathData","Image","__customImagePath","style","image","Text","__customText","text","Clz","charAt","toUpperCase","slice","__customGraphicType","name","updateEl","dataIndex","animatableModel","isInit","targetProps","elOptionStyle","clone","position","scale","origin","rotation","targetStyle","each","prop","prepareStyleTransition","hasOwnProperty","fill","textFill","stroke","textStroke","useStyle","opacity","targetOpacity","initProps","attr","updateProps","z2","silent","styleEmphasis","setHoverStyle","oldElStyle","get","coordSys","prepareResult","userAPI","defaults","getWidth","getHeight","getZr","getDevicePixelRatio","value","visual","barLayout","currentSeriesIndices","font","userParams","context","seriesId","id","seriesName","seriesIndex","dataInsideLength","count","encode","wrapEncodeDef","currDataIndexInside","currDirty","currItemModel","currLabelNormalModel","currLabelEmphasisModel","currVisualColor","dataIndexInside","getRawIndex","updateCache","getItemModel","getModel","getItemVisual","dim","getDimension","extra","itemStyle","getItemStyle","setTextStyle","autoColor","isRectText","getShallow","retrieve2","getFormattedLabel","extend","retrieve3","visualType","opt","getBaseAxis","baseAxis","axis","getCurrentSeriesIndices","getFont","encodeDef","dimensions","dimName","dataDimIndex","dimInfo","getDimensionInfo","isExtraCoord","coordDim","dataDims","coordDimIndex","doCreateOrUpdate","setItemGraphicEl","elOptionType","oldChildren","children","newChildren","diffChildrenByName","diffGroupChildren","index","length","childAt","getKey","processAddUpdate","processRemove","item","newIndex","oldIndex","childOption","child"],"mappings":"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","sourcesContent":["var _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphicUtil = require(\"../util/graphic\");\n\nvar _labelHelper = require(\"./helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\nvar createListFromArray = require(\"./helper/createListFromArray\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar getLayoutOnAxis = _barGrid.getLayoutOnAxis;\n\nvar DataDiffer = require(\"../data/DataDiffer\");\n\nvar prepareCartesian2d = require(\"../coord/cartesian/prepareCustom\");\n\nvar prepareGeo = require(\"../coord/geo/prepareCustom\");\n\nvar prepareSingleAxis = require(\"../coord/single/prepareCustom\");\n\nvar preparePolar = require(\"../coord/polar/prepareCustom\");\n\nvar prepareCalendar = require(\"../coord/calendar/prepareCustom\");\n\nvar ITEM_STYLE_NORMAL_PATH = ['itemStyle'];\nvar ITEM_STYLE_EMPHASIS_PATH = ['emphasis', 'itemStyle'];\nvar LABEL_NORMAL = ['label'];\nvar LABEL_EMPHASIS = ['emphasis', 'label']; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird udpate animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n}; // ------\n// Model\n// ------\n\necharts.extendSeriesModel({\n  type: 'series.custom',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    // Can be set as 'none'\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // label: {}\n    // itemStyle: {}\n\n  },\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  }\n}); // -----\n// View\n// -----\n\necharts.extendChartView({\n  type: 'custom',\n\n  /**\n   * @private\n   * @type {module:echarts/data/List}\n   */\n  _data: null,\n\n  /**\n   * @override\n   */\n  render: function (customSeries, ecModel, api) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n    this.group.removeAll();\n    data.diff(oldData).add(function (newIdx) {\n      data.hasValue(newIdx) && createOrUpdate(null, newIdx, renderItem(newIdx), customSeries, group, data);\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      data.hasValue(newIdx) ? createOrUpdate(el, newIdx, renderItem(newIdx), customSeries, group, data) : el && group.remove(el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  },\n  incrementalPrepareRender: function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  },\n  incrementalRender: function (params, customSeries, ecModel, api) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.useHoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdate(null, idx, renderItem(idx), customSeries, this.group, data);\n      el.traverse(setIncrementalAndHoverLayer);\n    }\n  },\n\n  /**\n   * @override\n   */\n  dispose: zrUtil.noop\n});\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el;\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape;\n    el = graphicUtil.makePath(shape.pathData, null, {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width || 0,\n      height: shape.height || 0\n    }, 'center');\n    el.__customPathData = elOption.pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    el.__customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({});\n    el.__customText = elOption.style.text;\n  } else {\n    var Clz = graphicUtil[graphicType.charAt(0).toUpperCase() + graphicType.slice(1)];\n    el = new Clz();\n  }\n\n  el.__customGraphicType = graphicType;\n  el.name = elOption.name;\n  return el;\n}\n\nfunction updateEl(el, dataIndex, elOption, animatableModel, data, isInit) {\n  var targetProps = {};\n  var elOptionStyle = elOption.style || {};\n  elOption.shape && (targetProps.shape = zrUtil.clone(elOption.shape));\n  elOption.position && (targetProps.position = elOption.position.slice());\n  elOption.scale && (targetProps.scale = elOption.scale.slice());\n  elOption.origin && (targetProps.origin = elOption.origin.slice());\n  elOption.rotation && (targetProps.rotation = elOption.rotation);\n\n  if (el.type === 'image' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y', 'width', 'height'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    });\n  }\n\n  if (el.type === 'text' && elOption.style) {\n    var targetStyle = targetProps.style = {};\n    zrUtil.each(['x', 'y'], function (prop) {\n      prepareStyleTransition(prop, targetStyle, elOptionStyle, el.style, isInit);\n    }); // Compatible with previous: both support\n    // textFill and fill, textStroke and stroke in 'text' element.\n\n    !elOptionStyle.hasOwnProperty('textFill') && elOptionStyle.fill && (elOptionStyle.textFill = elOptionStyle.fill);\n    !elOptionStyle.hasOwnProperty('textStroke') && elOptionStyle.stroke && (elOptionStyle.textStroke = elOptionStyle.stroke);\n  }\n\n  if (el.type !== 'group') {\n    el.useStyle(elOptionStyle); // Init animation.\n\n    if (isInit) {\n      el.style.opacity = 0;\n      var targetOpacity = elOptionStyle.opacity;\n      targetOpacity == null && (targetOpacity = 1);\n      graphicUtil.initProps(el, {\n        style: {\n          opacity: targetOpacity\n        }\n      }, animatableModel, dataIndex);\n    }\n  }\n\n  if (isInit) {\n    el.attr(targetProps);\n  } else {\n    graphicUtil.updateProps(el, targetProps, animatableModel, dataIndex);\n  } // z2 must not be null/undefined, otherwise sort error may occur.\n\n\n  el.attr({\n    z2: elOption.z2 || 0,\n    silent: elOption.silent\n  });\n  elOption.styleEmphasis !== false && graphicUtil.setHoverStyle(el, elOption.styleEmphasis);\n}\n\nfunction prepareStyleTransition(prop, targetStyle, elOptionStyle, oldElStyle, isInit) {\n  if (elOptionStyle[prop] != null && !isInit) {\n    targetStyle[prop] = elOptionStyle[prop];\n    elOptionStyle[prop] = oldElStyle[prop];\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms() : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = zrUtil.defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currDirty = true;\n  var currItemModel;\n  var currLabelNormalModel;\n  var currLabelEmphasisModel;\n  var currVisualColor;\n  return function (dataIndexInside) {\n    currDataIndexInside = dataIndexInside;\n    currDirty = true;\n    return renderItem && renderItem(zrUtil.defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside)\n    }, userParams), userAPI) || {};\n  }; // Do not update cache until api called.\n\n  function updateCache(dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (currDirty) {\n      currItemModel = data.getItemModel(dataIndexInside);\n      currLabelNormalModel = currItemModel.getModel(LABEL_NORMAL);\n      currLabelEmphasisModel = currItemModel.getModel(LABEL_EMPHASIS);\n      currVisualColor = data.getItemVisual(dataIndexInside, 'color');\n      currDirty = false;\n    }\n  }\n  /**\n   * @public\n   * @param {number|string} dim\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   * @return {number|string} value\n   */\n\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.get(data.getDimension(dim || 0), dataIndexInside);\n  }\n  /**\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function style(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();\n    currVisualColor != null && (itemStyle.fill = currVisualColor);\n    var opacity = data.getItemVisual(dataIndexInside, 'opacity');\n    opacity != null && (itemStyle.opacity = opacity);\n    graphicUtil.setTextStyle(itemStyle, currLabelNormalModel, null, {\n      autoColor: currVisualColor,\n      isRectText: true\n    });\n    itemStyle.text = currLabelNormalModel.getShallow('show') ? zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {Object} [extra]\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function styleEmphasis(extra, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    updateCache(dataIndexInside);\n    var itemStyle = currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();\n    graphicUtil.setTextStyle(itemStyle, currLabelEmphasisModel, null, {\n      isRectText: true\n    }, true);\n    itemStyle.text = currLabelEmphasisModel.getShallow('show') ? zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside, 'emphasis'), customSeries.getFormattedLabel(dataIndexInside, 'normal'), getDefaultLabel(data, dataIndexInside)) : null;\n    extra && zrUtil.extend(itemStyle, extra);\n    return itemStyle;\n  }\n  /**\n   * @public\n   * @param {string} visualType\n   * @param {number} [dataIndexInside=currDataIndexInside]\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getItemVisual(dataIndexInside, visualType);\n  }\n  /**\n   * @public\n   * @param {number} opt.count Positive interger.\n   * @param {number} [opt.barWidth]\n   * @param {number} [opt.barMaxWidth]\n   * @param {number} [opt.barGap]\n   * @param {number} [opt.barCategoryGap]\n   * @return {Object} {width, offset, offsetCenter} is not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.getBaseAxis) {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(zrUtil.defaults({\n        axis: baseAxis\n      }, opt), api);\n    }\n  }\n  /**\n   * @public\n   * @return {Array.<number>}\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @param {Object} opt\n   * @param {string} [opt.fontStyle]\n   * @param {number} [opt.fontWeight]\n   * @param {number} [opt.fontSize]\n   * @param {string} [opt.fontFamily]\n   * @return {string} font string\n   */\n\n\n  function font(opt) {\n    return graphicUtil.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  zrUtil.each(data.dimensions, function (dimName, dataDimIndex) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = dataDimIndex;\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  el = doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data);\n  el && data.setItemGraphicEl(dataIndex, el);\n  return el;\n}\n\nfunction doCreateOrUpdate(el, dataIndex, elOption, animatableModel, group, data) {\n  var elOptionType = elOption.type;\n\n  if (el && elOptionType !== el.__customGraphicType && (elOptionType !== 'path' || elOption.pathData !== el.__customPathData) && (elOptionType !== 'image' || elOption.style.image !== el.__customImagePath) && (elOptionType !== 'text' || elOption.style.text !== el.__customText)) {\n    group.remove(el);\n    el = null;\n  } // `elOption.type` is undefined when `renderItem` returns nothing.\n\n\n  if (elOptionType == null) {\n    return;\n  }\n\n  var isInit = !el;\n  !el && (el = createEl(elOption));\n  updateEl(el, dataIndex, elOption, animatableModel, data, isInit);\n\n  if (elOptionType === 'group') {\n    var oldChildren = el.children() || [];\n    var newChildren = elOption.children || [];\n\n    if (elOption.diffChildrenByName) {\n      // lower performance.\n      diffGroupChildren({\n        oldChildren: oldChildren,\n        newChildren: newChildren,\n        dataIndex: dataIndex,\n        animatableModel: animatableModel,\n        group: el,\n        data: data\n      });\n    } else {\n      // better performance.\n      var index = 0;\n\n      for (; index < newChildren.length; index++) {\n        doCreateOrUpdate(el.childAt(index), dataIndex, newChildren[index], animatableModel, el, data);\n      }\n\n      for (; index < oldChildren.length; index++) {\n        oldChildren[index] && el.remove(oldChildren[index]);\n      }\n    }\n  }\n\n  group.add(el);\n  return el;\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdate(child, context.dataIndex, childOption, context.animatableModel, context.group, context.data);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  child && context.group.remove(child);\n}"]},"metadata":{},"sourceType":"script"}